<div class="container">
  <div class="message">
    <div class="col-xs-12 col-md-6" style="font-size:2.2em;color:#696969;">
      <b><%= current_user.forname %>'s Orders</b>
    </div>
    <div class="col-xs-12 col-md-6 text-right">
      <%= link_to "New Order", new_order_path, class: "btn btn-success" %>
    </div>
  </div>

  <%# if @orders.current_user? %>
  <% @orders.each do |o| %>
   <%# if policy(o).index %>
    <%= link_to order_path(o) do %>
      <div class="message">
        <div class="message-name">
          <h3>Order# <%= o.id %></h3>
          <p><%= o.created_at.strftime("%m/%d/%Y") %></p>
          <p><%= o.created_at.strftime("%H:%M:%S") %></p>
        </div>
        <div class="message-body">
          <p><strong>Total Quantities: <%= o.total_quantity %></strong></p>
          <p>
            <b>Delivery Address:</b> <%= o.address %>
          </p>
          <%# o.consignments.select { |oc| @t = oc.tracking_no }  %>
            <p><b>Tracking No:</b> <%= o.consignments.last.tracking_no == "" || nil ? "Provided Upon Dispatch" : o.consignments.last.tracking_no %></p>
        </div>
        <div class="message-status">
          <% if o.status == "Ordered" %>
          <p class="status pending"><%= o.status %></p>
          <% elsif o.status == "Dispatched" %>
          <p class="status accepted"><%= o.status %></p>
          <% elsif o.status == "Incomplete" %>
          <p class="status declined"><%= o.status %> </p>
          <% end %>
          <p class="price"><%= number_to_currency o.calculate_total %></p>
          <%#= link_to "Delete", orders_path(o) ,method: :destroy, data: {confirm: "Are you sure?"}, class: "btn btn-success" %>
        </div>
      </div>
    <%# end %>
    <% end %>
  <% end %>
  <%# end %>
</div>


<style>

body {
  background-color: #fff;
}
.message {
  background-color: #F8F8FF;
  display: flex;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid rgba(220,224,244,0.4);
}
.message:last-child {
  border-bottom: none;
}
.message-body {
  flex-grow: 1;
}
.message-name {
  padding-left: 10px;
  min-width: 100px;
}
.message-name h3 {
  font-size: 13px;
  margin-bottom: 0px;
}
.message-name p {
  font-size: 13px;
  font-weight: lighter;
  opacity: 0.6;
  margin-top: 5px;
}
.message-body {
  padding-left: 10px;
  font-size: 13px;
  color: rgba(0,0,0,0.7);
}
.message-body {
  padding-left: 20px;
  color: rgba(0,0,0,0.4);
}
.message-body strong{
  color: rgba(0,0,0,0.9);
  color: rgba(0,0,0,0.9);
}
.message-body p {
  margin: 6px 0;
}
.message-status {
  font-size: 14px;
  font-weight: bold;
}
.status.accepted {
  color: #04A366;
}
.status.declined {
  color: #FFA14E;
}
.status.pending {
  color: grey;
}
</style>
